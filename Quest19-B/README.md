# Quest 19-B. 서버 아키텍쳐 패턴

## Introduction

- 이번 퀘스트에서는 현대적인 서버 아키텍쳐 패턴에 대해 익혀 보도록 하겠습니다.

## Topics

- Microservice Architecture
- Serverless Architecture
- AWS Lambda
- Service Mesh

## Resources

- [Jeff Bezos의 이메일](https://news.hada.io/topic?id=638)
- [마이크로서비스란?](https://www.redhat.com/ko/topics/microservices/what-are-microservices)
- [AWS Lambda](https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/welcome.html)
- [AWS API Gateway](https://docs.aws.amazon.com/ko_kr/apigateway/latest/developerguide/welcome.html)

## Checklist

- 마이크로서비스 아키텍쳐란 무엇일까요? 어떤 식으로 서비스를 구성할 수 있을까요? 어떤 장점을 가지고 있을까요?
  마이크로서비스 아키텍처는 애플리케이션을 여러 개의 작은 서비스로 분리하고, 각 서비스가 독립적으로 배포될 수 있도록 설계하는 소프트웨어 아키텍처 패턴이다. 각 서비스는 작고 독립적이며, 서로 다른 기술 스택과 데이터베이스를 사용할 수 있다. 이러한 서비스들은 독립적으로 개발, 배포, 확장 및 장애 처리가 가능하다.
  마이크로서비스 아키텍처는 대규모 애플리케이션에서 여러 이점을 제공한다. 이 아키텍처는 다음과 같은 특징을 가진다.

  1. 유연성: 각 서비스는 독립적으로 개발, 배포 및 관리가 가능하므로 전체 시스템에 대한 변경이나 업데이트가 필요하지 않다.
  2. 확장성: 각 서비스는 독립적으로 확장이 가능하다. 즉, 자원을 추가하거나 줄이거나, 새로운 서버를 추가하여 필요한 자원을 관리할 수 있다.
  3. 개발 속도 향상: 각 서비스는 독립적으로 개발할 수 있으므로, 새로운 기능이나 업데이트를 더욱 빠르게 출시할 수 있다.
  4. 재사용성: 각 서비스는 독립적이므로, 다른 애플리케이션에서도 재사용이 가능하다.
  5. 유지보수성: 각 서비스는 독립적으로 관리되므로, 시스템 전체에 영향을 미치는 오류나 장애가 발생해도 전체 시스템이 영향을 받지 않다.

  마이크로서비스 아키텍처를 구성할 때, 서비스 간 통신을 위한 프로토콜과 데이터 모델, 서비스 디스커버리, 로드 밸런싱, 모니터링, 로깅 등 다양한 기술과 도구를 사용할 수 있습니다. 또한, 각 서비스는 서로 다른 기술 스택을 사용할 수 있으므로, 가장 적합한 기술을 선택하여 개발할 수 있다.

- 서버리스 아키텍쳐란 무엇일까요? 어떤 식으로 서비스를 구성할 수 있을까요? 어떤 장점을 가지고 있을까요?
  서버리스 아키텍처는 서버를 직접 관리하지 않고 클라우드 서비스 제공 업체에서 서버 인프라를 관리하는 방식입니다. 서버리스 아키텍처에서는 서버 인프라를 관리하기 위한 부담과 복잡성을 줄이고, 애플리케이션 코드의 생산성을 높이며, 실행 환경을 더욱 효율적으로 활용하여 비용을 절감할 수 있습니다.
  서버리스 아키텍처에서는 개별 함수 단위로 서비스를 구성하며, 함수는 이벤트에 반응하여 실행됩니다. 일반적으로 서버리스 아키텍처에서는 함수 실행을 위해 컨테이너가 사용되며, 컨테이너는 이벤트에 반응하여 시작되어 함수 실행을 처리한 후 종료됩니다. 이러한 방식은 빠르고 확장성이 뛰어나며, 비용을 절감할 수 있습니다.
  서버리스 아키텍처의 가장 큰 장점은 비용 효율성입니다. 인프라를 직접 관리하지 않으므로 서버 인프라의 유지보수, 업그레이드, 보안 패치 등에 드는 비용과 시간을 줄일 수 있습니다. 또한, 함수 단위로 개발이 가능하기 때문에 개발 생산성이 향상되고, 빠른 서비스 제공이 가능합니다. 서버리스 아키텍처는 또한 높은 확장성을 가지고 있어서, 트래픽 증가에 따라 자동으로 컴퓨팅 리소스를 확장할 수 있습니다.
  하지만 서버리스 아키텍처의 단점도 있습니다. 서버리스 아키텍처에서는 함수 단위로 서비스를 구성하기 때문에 함수 간의 통신이 복잡해질 수 있습니다. 또한, 서버리스 아키텍처에서는 함수 실행을 위해 컨테이너를 사용하기 때문에 컨테이너가 실행되는 시간이 추가적으로 소요될 수 있습니다.

- AWS Lambda는 어떤 서비스일까요? 이러한 서비스는 어떤 특징을 가지고, 어디에 쓰일 수 있을까요?
  AWS Lambda는 서버리스 아키텍처를 기반으로 하는 이벤트 기반 컴퓨팅 플랫폼이다. 이벤트가 발생하면 해당 이벤트를 처리하는 함수를 실행하는데, 이 함수는 AWS에서 지원하는 여러 프로그래밍 언어로 작성할 수 있다.

  AWS Lambda는 특정한 하드웨어나 인프라에 종속되지 않으며, 사용한 만큼 비용을 지불하는 Pay-As-You-Go 모델을 채택하고 있다. 이로 인해 서버 관리나 확장성에 대한 부담을 줄일 수 있다.

  AWS Lambda는 다양한 서비스와 연동하여 사용할 수 있다. 예를 들어, Amazon S3 버킷에 파일이 업로드되면 해당 파일을 처리하는 함수를 실행하거나, Amazon Kinesis 스트림에서 데이터가 수집되면 해당 데이터를 처리하는 함수를 실행하는 등의 방식으로 사용할 수 있다.

  AWS Lambda의 장점은 다음과 같다.

  - 서버 관리 부담 감소: 서버리스 아키텍처를 기반으로 하기 때문에 서버를 관리할 필요가 없다.
  - 비용 절감: 사용한 만큼 비용을 지불하는 Pay-As-You-Go 모델을 채택하고 있다.
  - 높은 확장성: 수행되는 함수의 수행량에 따라 자동으로 확장되기 때문에 높은 확장성을 가지고 있다.
  - 빠른 개발: 서버를 구축하고 관리할 필요가 없기 때문에 개발 속도를 높일 수 있다.

* API Gateway는 어떤 서비스인가요? 어떤 설정을 할 수 있을까요?
  AWS API Gateway는 RESTful API와 WebSocket을 빠르고 쉽게 생성, 배포, 관리할 수 있는 완전 관리형 서비스다. API Gateway를 사용하면 API 요청을 받아 Lambda 함수, EC2, HTTP 엔드포인트, AWS 서비스 등의 백엔드 서비스로 라우팅할 수 있다.
  API Gateway를 사용하여 요청 및 응답 메시지를 변환, 인증 및 권한 부여, 요청 및 응답 로깅, 성능 모니터링, 요청 스로틀링 등을 구성할 수 있다.
  API Gateway는 다양한 인증 및 권한 부여 방법을 제공한다. API Key, IAM Role, Lambda Authorizer, Cognito User Pool 등을 사용하여 API 보안을 강화할 수 있다.
  또한 API Gateway는 다양한 배포 및 관리 옵션을 제공한다. Stage를 사용하여 API Gateway의 개발, 테스트 및 프로덕션 환경을 분리하고, Canary Deployment를 사용하여 새로운 API 버전을 안전하게 롤아웃할 수 있다. API Gateway는 CloudFormation, Swagger, OpenAPI 등과 같은 다양한 도구와 통합되어 있어 빠르고 쉬운 배포 및 관리가 가능하다.
  API Gateway는 서버리스 아키텍처에서 매우 중요한 역할을 한다. Lambda와 함께 사용하여 AWS 서비스 및 외부 엔드포인트와 통합하고, 이러한 서비스와 함께 Amazon API Gateway를 사용하여 RESTful API를 빠르고 쉽게 만들 수 있다.

* 많은 마이크로서비스들을 복잡하게 연결할 경우 관리상에 어떤 난점이 생길 수 있을까요? 서비스 메쉬는 무엇이고 이러한 난점을 어떻게 해결하려는 시도일까요?
  마이크로서비스 아키텍처에서는 하나의 기능을 제공하기 위해 여러 개의 작은 서비스들이 분산되어 동작하므로, 이러한 서비스들이 복잡하게 연결될 경우 관리상에 어려움이 생길 수 있다. 예를 들어, 여러 개의 서비스들이 서로 다른 프로그래밍 언어로 작성되어 있거나, 여러 개의 서비스들이 서로 다른 프로토콜로 통신하는 경우, 서비스 간의 연결이 복잡해지며, 각각의 서비스들의 버전 관리와 업데이트, 스케일링 등의 작업이 어려워진다.
  서비스 메시는 이러한 문제를 해결하기 위해 등장한 개념으로, 서비스 간의 통신을 추상화하여 서비스 간의 연결과 통신을 표준화하고, 서비스들 간의 로드 밸런싱, 서비스 디스커버리, 보안 등의 작업을 자동화한다. 이를 위해, 각 서비스들은 사이드카 프록시라 불리는 작은 프로세스와 함께 동작하며, 사이드카 프록시가 서비스 간의 통신을 관리한다. 이러한 구조를 통해, 각 서비스들은 상호작용할 필요 없이, 서비스 메시에 의해 관리한다.
  서비스 메시를 구현하는 여러 가지 프레임워크가 있으며, 대표적으로 Istio, Linkerd, Consul 등이 있다. 이러한 서비스 메시 프레임워크를 사용하면, 서비스 간의 통신을 표준화하여 각각의 서비스들을 관리하는 작업을 간소화할 수 있다. 또한, 서비스 메시는 서비스들 간의 통신을 추적하고 모니터링할 수 있으므로, 서비스의 성능 및 안정성을 향상시키는 데 도움이 된다.

## Quest

- 메모장 시스템을 JWT 발급을 위한 마이크로서비스와 실제 비즈니스 로직을 처리하는 마이크로서비스로 나누어 보세요.
- JWT 토큰 발급의 역할을 하는 마이크로서비스를 AWS Lambda와 API Gateway를 이용하여 구축해 보세요.

## Advanced

- Istio는 어떤 툴일까요? 이 툴을 Kubernetes와 함께 사용하여 어떤 구조를 구현할 수 있을까요?
